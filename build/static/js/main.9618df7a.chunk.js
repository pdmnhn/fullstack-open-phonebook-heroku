(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,t,n){"use strict";n.r(t);var r=n(16),c=n.n(r),o=n(3),a=n(1),i=n.n(a),u=n(0);function s(e){var t=e.filterText,n=e.changeFilterText;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:t,onChange:n})]})}function d(e){var t=e.addPerson,n=e.newName,r=e.changeName,c=e.newNumber,o=e.changeNumber;return Object(u.jsxs)("form",{onSubmit:t,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:r})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:c,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})}function l(e){var t=e.persons,n=e.deletePerson;return t.map((function(e){var t=e.name,r=e.number,c=e.id;return Object(u.jsxs)("div",{children:[t," ",r," ",Object(u.jsx)("button",{onClick:function(){return n(t,c)},children:"delete"})]},c)}))}var b=n(4),j=n.n(b),f="http://localhost:3001/api/persons",h={getAll:function(){return j.a.get(f).then((function(e){return e.data}))},create:function(e){return j.a.post(f,e).then((function(e){return e.data}))},deletePerson:function(e){return j.a.delete("".concat(f,"/").concat(e))},modifyPerson:function(e,t){return j.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))}},m={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},O=function(e){var t=e.message;return null===t?null:Object(u.jsx)("div",{style:m,className:"error",children:t})},p=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),b=i[0],j=i[1],f=Object(a.useState)(""),m=Object(o.a)(f,2),p=m[0],x=m[1],v=Object(a.useState)(""),g=Object(o.a)(v,2),w=g[0],C=g[1],N=Object(a.useState)(null),S=Object(o.a)(N,2),P=S[0],k=S[1],y=Object(a.useState)(null),L=Object(o.a)(y,2),T=L[0],A=L[1],D=function(e){clearTimeout(T),k(e),A(setTimeout((function(){k(null)}),5e3))};Object(a.useEffect)((function(){h.getAll().then((function(e){r(e)}))}),[]);var B=""===w?n:n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(O,{message:P}),Object(u.jsx)(s,{filterText:w,changeFilterText:function(e){C(e.target.value)}}),Object(u.jsx)("h1",{children:"add a new"}),Object(u.jsx)(d,{addPerson:function(e){if(e.preventDefault(),n.map((function(e){return e.name.toLowerCase()})).includes(b.toLowerCase())){if(!0===window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var t=n.find((function(e){return e.name.toLowerCase()===b.toLowerCase()}));h.modifyPerson(t.id,{name:b,number:p,id:t.id}).then((function(e){r(n.map((function(t){return t.id!==e.id?t:e}))),D("Changed ".concat(b))})).catch((function(e){D(e.response.data.error)}))}}else{var c={name:b,number:p};h.create(c).then((function(e){r(n.concat(e)),D("Added ".concat(b))})).catch((function(e){D(e.response.data.error)}))}j(""),x("")},newName:b,changeName:function(e){j(e.target.value)},newNumber:p,changeNumber:function(e){x(e.target.value)}}),Object(u.jsx)("h1",{children:"Numbers"}),Object(u.jsx)(l,{persons:B,deletePerson:function(e,t){!1!==window.confirm("Delete ".concat(e,"?"))&&(h.deletePerson(t),r(n.filter((function(e){return e.id!==t}))),D("Deleted ".concat(e)))}})]})};c.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.9618df7a.chunk.js.map